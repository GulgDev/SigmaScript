(()=>{"use strict";var __webpack_modules__={842:(t,e,r)=>{r.d(e,{h:()=>_});var s=r(879),n=r(56);class _ extends s.j{constructor(){super(...arguments),this.registry=new n.O("array"),this.functions={array:(...t)=>this.array(t),array_add:(t,e)=>this.add(t,e),array_remove:(t,e)=>this.remove(t,e),array_at:(t,e)=>this.at(t,e),array_set:(t,e,r)=>this.set(t,e,r),array_length:t=>this.length(t),array_find:(t,e)=>this.find(t,e)}}array(t){return this.registry.add(t)}add(t,e){return this.registry.get(t)?.push(e),"unknown"}remove(t,e){return this.registry.get(t)?.splice(Number.parseInt(e),1),"unknown"}at(t,e){return this.registry.get(t)?.at(Number.parseInt(e))??"unknown"}set(t,e,r){const s=this.registry.get(t),n=Number.parseInt(e);return s&&!Number.isNaN(n)&&n>=-s.length&&n<s.length&&(s[n<0?s.length+n:n]=r),"unknown"}length(t){const e=this.registry.get(t);return null==e?"unknown":`${e.length}`}find(t,e){const r=this.registry.get(t)?.indexOf(e);return null==r||-1===r?"unknown":`${r}`}getArray(t){return this.registry.get(t)}}},855:(t,e,r)=>{r.d(e,{a:()=>_});var s=r(879),n=r(56);class _ extends s.j{constructor(){super(...arguments),this.registry=new n.O("fn"),this.functions={call:(t,...e)=>this.call(t,e)}}addFn(t){return this.registry.add(t)}getFn(t){return this.registry.get(t)}call(t,e){return this.registry.get(t)?.(...e)??"unknown"}}},879:(t,e,r)=>{r.d(e,{j:()=>n,y:()=>s});class s{constructor(t,e){this.result=null,this.runtime=t,this.func=e}use(t){this.runtime.copyScope(this.result??(this.result=this.func(this.runtime)),t)}}class n{constructor(t){this.variables={},this.functions={},this.runtime=t}use(t){Object.assign(t.variables,this.variables),Object.assign(t.functions,this.functions)}}},201:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{L:()=>NodeJSLib});var _js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(416);class NodeJSLib extends _js__WEBPACK_IMPORTED_MODULE_0__.V{constructor(){super(...arguments),this.variables={js_env:"node",js_global:this.registry.add(globalThis)},this.functions={...this.functions,js_require:path=>this.toSS(eval("require")(path))}}}},416:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{V:()=>JSLib});var ___WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(879),_registry__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(56),_array__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(842),_fn__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(855),_ref__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(642),_struct__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(126);const ssSymbol=Symbol("ss");class JSLib extends ___WEBPACK_IMPORTED_MODULE_4__.j{constructor(){super(...arguments),this.registry=new _registry__WEBPACK_IMPORTED_MODULE_5__.O("js"),this.functions={js:t=>this.js(t),js_get:(t,e)=>this.get(t,e),js_set:(t,e,r)=>this.set(t,e,r),js_new:(t,...e)=>this.new(t,e),js_object:()=>this.toSS({}),js_array:()=>this.toSS([]),js_call:(t,...e)=>this.call(t,e),js_call_method:(t,e,...r)=>this.callMethod(t,e,r)}}getObject(t){return this.registry.get(t)}toJSObject(t){if(t.startsWith("#js:"))return this.getObject(t);if(t.startsWith("#fn")){const e=this.runtime.getLib(_fn__WEBPACK_IMPORTED_MODULE_1__.a).getFn(t);if(!e)return;return(...t)=>this.toJS(e(...t.map((t=>this.toSS(t)))))}if(t.startsWith("#struct:")){const e=this.runtime.getLib(_struct__WEBPACK_IMPORTED_MODULE_3__.B).getStruct(t);if(!e)return;const r={};for(const t in e)r[t]=this.toJS(e[t]);return r}if(t.startsWith("#array:")){const e=this.runtime.getLib(_array__WEBPACK_IMPORTED_MODULE_0__.h).getArray(t);if(!e)return;return e.map((t=>this.toJS(t)))}return t}toJS(t){if(t.startsWith("#ref:"))return this.toJS(this.runtime.getLib(_ref__WEBPACK_IMPORTED_MODULE_2__.t).get(t));if("unknown"===t)return;if("false"===t)return!1;if("true"===t)return!0;if(/^-?[0-9]+(\.[0-9]+)?$/.test(t))return Number.parseFloat(t);const e=this.toJSObject(t);return e instanceof Object&&!e[ssSymbol]&&Object.defineProperty(e,ssSymbol,{value:t,enumerable:!1}),e}toSS(t){const e=t[ssSymbol];return void 0!==e?e:null==t||Number.isNaN(t)?"unknown":"string"==typeof t||t instanceof String||"boolean"==typeof t||t instanceof Boolean||"number"==typeof t||t instanceof Number?`${t}`:this.registry.add(t)}js(code){return this.toSS(eval(code))}get(t,e){const r=this.toJS(t)?.[e];return null==r?"unknown":this.toSS(r)}set(t,e,r){const s=this.toJS(t);return null!=s&&(s[e]=this.toJS(r)),"unknown"}new(t,e){const r=this.toJS(t);if(null==r)return"unknown";const s=new r(...e.map((t=>this.toJS(t))));return null==s?"unknown":this.toSS(s)}call(t,e){const r=this.toJS(t)?.(...e.map((t=>this.toJS(t))));return null==r?"unknown":this.toSS(r)}callMethod(t,e,r){const s=this.toJS(t)?.[e]?.(...r.map((t=>this.toJS(t))));return null==s?"unknown":this.toSS(s)}}},642:(t,e,r)=>{r.d(e,{t:()=>_});var s=r(879),n=r(56);class _ extends s.j{constructor(){super(...arguments),this.registry=new n.O("ref"),this.functions={ref:t=>this.ref(t),ref_set:(t,e)=>this.set(t,e),ref_get:t=>this.get(t)}}ref(t){return this.registry.add(t)}set(t,e){return this.registry.set(t,e),"unknown"}get(t){return this.registry.get(t)??"unknown"}}},126:(t,e,r)=>{r.d(e,{B:()=>_});var s=r(879),n=r(56);class _ extends s.j{constructor(){super(...arguments),this.registry=new n.O("struct"),this.functions={struct:()=>this.struct(),struct_set:(t,e,r)=>this.set(t,e,r),struct_get:(t,e)=>this.get(t,e)}}struct(){return this.registry.add({})}set(t,e,r){const s=this.registry.get(t);return s&&(s[e]=r),"unknown"}get(t,e){return this.registry.get(t)?.[e]??"unknown"}getStruct(t){return this.registry.get(t)}}},56:(t,e,r)=>{r.d(e,{O:()=>s});class s{constructor(t){this.elements={},this.id=-1,this.name=t}add(t){const e=`#${this.name}:${++this.id}`;return this.elements[e]=t,e}set(t,e){t in this.elements&&(this.elements[t]=e)}get(t){return this.elements[t]}}}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var r=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](r,r.exports,__webpack_require__),r.exports}__webpack_require__.d=(t,e)=>{for(var r in e)__webpack_require__.o(e,r)&&!__webpack_require__.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},__webpack_require__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var __webpack_exports__={};(()=>{var t=__webpack_require__(879),e=__webpack_require__(855),r=__webpack_require__(416),s=__webpack_require__(201),n=__webpack_require__(642);class _ extends t.j{constructor(){super(...arguments),this.functions={string_at:(t,e)=>t.at(Number.parseInt(e))??"unknown",string_length:t=>`${t.length}`,string_slice:(t,e,r)=>t.slice(Number.parseInt(e),Number.parseInt(r)),string_replace:(t,e,r)=>t.replaceAll(e,r),string_format:(t,...e)=>this.format(t,e)}}format(t,e){if(0===e.length)return t;let r="";const s=t.length;let n=0,_=0;for(;n<s;){const s=t[n];if(++n,"%"===s){if("%"!==t[n]){if(r+=e[_],++_,_>=e.length){r+=t.slice(n);break}continue}++n}r+=s}return r}}var i=__webpack_require__(126),a=__webpack_require__(842);function u(t){return(...e)=>{const r=t(...e.map((t=>Number.parseFloat(t))));return Number.isNaN(r)?"unknown":`${r}`}}class o extends t.j{constructor(){super(...arguments),this.variables={pi:`${Math.PI}`},this.functions={abs:u((t=>Math.abs(t))),sign:u((t=>Math.sign(t))),sqrt:u((t=>Math.sqrt(t))),mod:u(((t,e)=>t%e)),sin:u((t=>Math.sin(t))),cos:u((t=>Math.cos(t))),tan:u((t=>Math.tan(t))),asin:u((t=>Math.asin(t))),acos:u((t=>Math.acos(t))),atan:u(((t,e)=>null==e?Math.atan(t):Math.atan2(t,e))),sinh:u((t=>Math.sinh(t))),cosh:u((t=>Math.cosh(t))),tanh:u((t=>Math.tanh(t))),asinh:u((t=>Math.asinh(t))),acosh:u((t=>Math.acosh(t))),atanh:u((t=>Math.atanh(t))),exp:u((t=>Math.exp(t))),rad:u((t=>t*Math.PI/180)),deg:u((t=>180*t/Math.PI)),round:u(((t,e=1)=>Math.round(t/e)*e)),floor:u(((t,e=1)=>Math.floor(t/e)*e)),ceil:u(((t,e=1)=>Math.ceil(t/e)*e)),random:()=>`${Math.random()}`,randint:(t,e)=>this.randint(t,e)}}randint(t,e){const r=Number.parseFloat(t),s=Number.parseFloat(e),n=Math.min(r,s),_=Math.max(r,s);return`${Math.random()*(_-n)+n}`}}const c=new class{constructor(){this.libs={}}addLib(t,e){return this.libs[t]=e}getLib(t){return Object.values(this.libs).find((e=>e instanceof t))}lib(e,r){this.addLib(e,new t.y(this,r))}scope(t){const e={variables:{},functions:{}};return t&&this.copyScope(t,e),e}copyScope(t,e){Object.assign(e.variables,t.variables),Object.assign(e.functions,t.functions)}lambda(t){return this.getLib(e.a).addFn(t)}print(t){void 0===(t=this.getLib(r.V).toJS(t))&&(t="unknown"),console.log(t)}};c.addLib("fn",new e.a(c)),c.addLib("js",new s.L(c)),c.addLib("ref",new n.t(c)),c.addLib("string",new _(c)),c.addLib("struct",new i.B(c)),c.addLib("array",new a.h(c)),c.addLib("math",new o(c)),globalThis.runtime=c})()})();